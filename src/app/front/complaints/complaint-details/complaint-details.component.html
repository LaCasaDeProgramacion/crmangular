<app-front-nav></app-front-nav>

    <!-- Header container -->
    <section class="section pb-0 bg-gradient-warning">
        <div class="container">
            <div class="row row-grid justify-content-center">
                <div class="col-lg-8 text-center">
                  <h2 class="display-3 text-white">COMPLAINT DETAILS</h2>
                  <br>
                  <br>
                  <br>
                  <br>
                  <br>
                  <br>
                  <div class="btn-wrapper">
                    <div class="btn-wrapper">
                      </div>
                      </div>
                      </div>
                      </div>
            </div>
           
            </section>
<section class="section bg-secondary">
  <div class="container">
      
        <div class="card-body">
          <form>
            <h6 class="heading-small text-muted mb-4">General information</h6>
            <div class="pl-lg-4">
              <!-- Name -->
              <div class="row">
                <div class="col-lg-6">
                  <div class="form-group">
                    <label class="form-control-label" for="input-username">Body  &nbsp;:</label><br>
                    <label>{{complaint.complaintBody}}</label>
                  </div>
                </div>
                
                <div class="col-lg-2"></div>
                <div class="col-lg-4">
                    <div class="form-group">
                      <label class="form-control-label" for="input-username">Type &nbsp;:</label><br>
                        <label>{{complaint.typeComplaint.typeName}}</label>
                    </div>
                    <div class="form-group">
                        <label class="form-control-label" for="input-username">Object &nbsp;:</label><br>
                          <label>{{complaint.complaintObject.object}}</label>
                      </div>
                  </div>
              </div>
              <!-- Start + End date -->
              
            </div>
            
            <!-- Location -->
            
            <hr class="my-4" />
            <!-- Vehicules   -->
            <h6 class="heading-small text-muted mb-4">State &nbsp; : &nbsp;{{complaint.complaintState}}</h6>
            
            <hr class="my-4" />
            </form>
            </div>
  
  </div>
  <div class="separator separator-bottom separator-skew zindex-100">
      <svg x="0" y="0" viewBox="0 0 2560 100" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <polygon class="fill-white" points="2560 0 2560 100 0 100"></polygon>
      </svg>
    </div>
</section>
<section class="section section-components">
    <div class="container">
        <!-- comments -->
        <h5 *ngIf="complaint.comments.length == '1'"> {{complaint.comments.length}}   &nbsp;Comment &nbsp; <i class="fa fa-comment"></i></h5>
        <h5 *ngIf="complaint.comments.length == '0'"> No Comment <i class="fa fa-comment"></i></h5>
        <h5 *ngIf="complaint.comments.length != '0' && complaint.comments.length != '1'">{{complaint.comments.length}}   &nbsp;Comments &nbsp;<i class="fa fa-comment"></i></h5>
        <br>
        <br>
        <div class="media" *ngFor="let i of complaint.comments">
          <a class="pull-left" href="javascript:void(0)">
           <div class="avatar">
                <img class="media-object" [src]="i.user.picture" alt="..."/>
           </div>
          </a>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <div class="media-body">
            <h5 class="media-heading">{{i.user.username}}</h5>
            <div class="pull-right">
                <h6 class="text-muted">{{i.commentDate | date}}</h6>
                <a href="javascript:void(0)" class="icon-danger text-orange" (click)="deleteComment(i.id)" *ngIf="i.user.username === user">
                    delete
               </a>
            </div>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <p>{{i.comment}}</p>

            <div class="media-footer">
                <a href="javascript:void(0)" class="btn btn-white btn-link" (click)="Likecomment(i.id)">
                    <i class="fa fa-thumbs-up" aria-hidden="true"></i> {{i.likes}}
                </a>
                
                
            </div>

             <div class="media media-post">
                    <hr>                                      
             </div> <!-- end media-post -->
          </div>
    </div>

        <!-- <div class="row py-3 align-items-center" *ngFor="let i of complaint.comments">
          <div class="col-lg-3">
            <img src="./assets/img/theme/team-2-800x800.jpg" alt="Circle image" class="img-fluid rounded-circle shadow"
              style="width: 150px;"> <br> -->
              <!-- <small class="d-block text-uppercase font-weight-bold mb-4">{{i.commentDate}} </small>

            <small class="d-block text-uppercase font-weight-bold mb-4">{{i.user.username}} </small>
          </div>
          <div class="col-lg-9">
            <p>{{i.comment}}</p>
          </div>
        </div> --> 
        
      </div>
                          <div class="container" *ngIf="complaint.complaintState == 'Opened' || complaint.complaintState == 'In_progress'">
                              <h5> Write a comment &nbsp; <i class="fa fa-reply"></i></h5>
                              <form #lineForm= "ngForm" (ngSubmit)="onSubmit(complaint.id)">
                                  <textarea class="form-control form-control-alternative" name="comment" [(ngModel)]="comments.comment" #comment="ngModel" rows="4" cols="80"
                                  placeholder="Response .." required></textarea>
                                <div *ngIf="comment.invalid && comment.touched">
                                    <label class="form-control-label" for="input-address">Comment is required</label>

                                </div>
                                <div class="col-lg-3 ml-lg-auto">
                                  <button class="btn btn-icon btn-3 btn-success" type="submit"[disabled]="lineForm.invalid">
                                      <span class="btn-inner--icon"><i class="fa fa-reply"></i></span>
                                      <span class="btn-inner--text">Send</span>
                                    </button>
                                </div>
                              </form>
                            </div>
                          <!-- reply -->
                          
                        </section>
  
    <section class="section pb-0 bg-gradient-warning">
        <div class="container">
          <div class="row row-grid align-items-center">
            <div class="col-md-6 order-lg-2 ml-lg-auto">
              <div class="position-relative pl-md-5">
              </div>
            </div>
            <div class="col-lg-6 order-lg-1">
              <div class="d-flex px-3">
               
                <div class="pl-4">
                  <h4 class="display-3 text-white">&nbsp; &nbsp;&nbsp;&nbsp;  SIMILAR COMPLAINTS</h4>
                </div>
              </div>
            </div>
              <div class="col-md-4 order-lg-2" *ngFor="let x of collection.ListComplaints | paginate : config ">

                  <div class="card shadow shadow-lg--hover mt-5" *ngIf="x.complaintState =='treated'">
                      <div class="card-body">
                        <div class="d-flex px-3">
                          <div>
                            <div class="icon icon-shape bg-gradient-success rounded-circle text-white">
                              <i class="ni ni-satisfied"></i>
                            </div>
                          </div>
                          <div class="pl-4">
                            <h5 class="title text-success">{{x.complaintObject.object}}</h5>
                            
                              <p class="card-category" *ngIf="x.complaintState =='Opened'">Opened</p>
                                        <p class="card-category" *ngIf="x.complaintState =='In_progress'">In Progress</p>
                                        <p class="card-category" *ngIf="x.complaintState =='treated'">Treated</p>
                                        <p class="card-category" *ngIf="x.complaintState =='Closed_without_Solution'">Closed</p>
                            <a [routerLink]="['/home/cdetails/',x.id]" class="text-success">View Details</a>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="card shadow shadow-lg--hover mt-5 " *ngIf="x.complaintState != 'treated'">
                        <div class="card-body">
                          <div class="d-flex px-3">
                            <div>
                              <div class="icon icon-shape bg-gradient-warning rounded-circle text-white">
                                <i class="ni ni-active-40"></i>
                              </div>
                            </div>
                            <div class="pl-4">
                                <h5 class="title text-warning">{{x.complaintObject.object}}</h5>
                            
                                <p class="card-category" *ngIf="x.complaintState =='Opened'">Opened</p>
                                          <p class="card-category" *ngIf="x.complaintState =='In_progress'">In Progress</p>
                                          <p class="card-category" *ngIf="x.complaintState =='treated'">Treated</p>
                                          <p class="card-category" *ngIf="x.complaintState =='Closed_without_Solution'">Closed</p>
                              <a [routerLink]="['/home/cdetails/',x.id]" class="text-warning">View Details</a>
                            </div>
                          </div>
                        </div>
                      </div>
                  </div>
           
          </div>
        </div>
        <!-- SVG separator -->
        <div class="separator separator-bottom separator-skew zindex-100">
          <svg x="0" y="0" viewBox="0 0 2560 100" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
            <polygon class="fill-white" points="2560 0 2560 100 0 100"></polygon>
          </svg>
        </div>
      </section>
<app-front-footer></app-front-footer>

